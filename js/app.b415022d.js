(function(t){function e(e){for(var r,a,s=e[0],c=e[1],l=e[2],d=0,f=[];d<s.length;d++)a=s[d],n[a]&&f.push(n[a][0]),n[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],r=!0,s=1;s<o.length;s++){var c=o[s];0!==n[c]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=o[0]))}return t}var r={},n={app:0},i=[];function a(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=r,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(o,r,function(e){return t[e]}.bind(null,r));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var r=o("64a9"),n=o.n(r);n.a},1:function(t,e){},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("097d");var r=o("2b0e"),n=o("28dd"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("MetaCube",{attrs:{change:t.change},on:{"open-modal":t.onOpenModal}}),t.showModal?o("Modal",{attrs:{query:t.query},on:{"close-modal":t.onCloseModal}}):t._e()],1)},a=[],s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("vue-tabs",[o("v-tab",{attrs:{title:"Manage Cube"}},[o("div",[o("section",{staticClass:"section"},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("div",{staticClass:"field"},[o("label",{staticClass:"label"},[t._v("Cube Size")]),o("div",{staticClass:"control"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.cubeSize,expression:"cubeSize"}],staticClass:"input",attrs:{type:"number",step:"15",placeholder:"Cube Size"},domProps:{value:t.cubeSize},on:{input:function(e){e.target.composing||(t.cubeSize=e.target.value)}}}),t._v("\n                            Extra Slots: "+t._s(t.extraSlots())+"\n                        ")])])]),o("div",{staticClass:"column"},[o("div",{staticClass:"field"},[o("label",{staticClass:"label"},[t._v("Multicolor Size")]),o("div",{staticClass:"control"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.multicolorSize,expression:"multicolorSize"}],staticClass:"input",attrs:{type:"number",step:"10",placeholder:"Multicolor Size"},domProps:{value:t.multicolorSize},on:{input:function(e){e.target.composing||(t.multicolorSize=e.target.value)}}})])])]),o("div",{staticClass:"column"},[o("div",{staticClass:"field"},[o("label",{staticClass:"label"},[t._v("Export")]),o("div",{staticClass:"control"},[o("button",{staticClass:"button is-link is-fullwidth",on:{click:t.copyToClipboard}},[t._v("Copy to Clipboard")])])])])])]),o("section",{staticClass:"section"},[o("div",{staticClass:"columns"},[t._l(t.getGroups(),function(e){return o("div",{key:e,staticClass:"column container"},[t._v("\n                            "+t._s(e)+" ("+t._s(t.countByGroup(e))+")\n                            "),t._l(t.getTypes(e),function(r){return o("div",{key:[e,r].join("."),staticClass:"notification"},[t._v("\n                                "+t._s(r)+" ("+t._s(t.countByType(e,r))+")\n                                "),t._l(t.filterByType(e,r),function(n){return o("ul",{key:[e,r,n.cmc].join(".")},[o("li",[o("span",[t._v("cmc "+t._s(n.cmc))]),t.extraSlots()>0?o("button",{staticClass:"button is-small is-rounded",on:{click:function(e){t.addSlot(n)}}},[t._v("+")]):t._e(),n.cardSlots>0?o("button",{staticClass:"button is-small is-rounded",on:{click:function(e){t.removeSlot(n)}}},[t._v("-")]):t._e()]),t._l(n.cards,function(e,r){return o("li",{key:[e.name,r].join(".")},[o("v-popover",{attrs:{"boundaries-element":"body",placement:"right"}},[o("span",{staticClass:"tooltip-target b3 is-size-7"},[t._v(t._s(e.name))]),o("template",{slot:"popover"},[e.image_uris?o("div",{staticStyle:{width:"200px"}},[o("img",{attrs:{src:t.cardUrl(e)}})]):t._e(),e.image_uris?t._e():o("div",{staticStyle:{width:"350px"}},[o("img",{staticStyle:{width:"175px",height:"auto"},attrs:{src:e.card_faces[0].image_uris.normal}}),o("img",{staticStyle:{width:"175px",height:"auto"},attrs:{src:e.card_faces[1].image_uris.normal}})])])],2),o("button",{staticClass:"button is-small is-rounded",on:{click:function(o){t.removeCard(e)}}},[t._v("-")])],1)}),t._l(t.openSlots(n),function(i){return o("li",{key:[e,r,n.cmc,i].join(".")},[o("span",{staticClass:"is-size-7"},[t._v("Open Slot ")]),o("button",{staticClass:"button is-small is-rounded",on:{click:function(e){t.$emit("open-modal",n)}}},[t._v("+")])])})],2)})],2)})],2)}),o("div",{staticClass:"column container"},[t._v("\n                        Multicolor\n                        "),t._l(t.getMultiGroups(),function(e){return o("div",{key:["other",e.join("-")].join("."),staticClass:"notification"},[t._v("\n                            "+t._s(e.join(", "))+" \n                            "),o("ul",[t._l(t.filterByMultiGroup(e).cards,function(e,r){return o("li",{key:[e.name,r].join(".")},[o("v-popover",{attrs:{"boundaries-element":"body",placement:"right"}},[o("span",{staticClass:"tooltip-target b3 is-size-7"},[t._v(t._s(e.name))]),o("template",{slot:"popover"},[e.image_uris?o("div",{staticStyle:{width:"200px"}},[o("img",{attrs:{src:t.cardUrl(e)}})]):t._e(),e.image_uris?t._e():o("div",{staticStyle:{width:"350px"}},[o("img",{staticStyle:{width:"175px",height:"auto"},attrs:{src:e.card_faces[0].image_uris.normal}}),o("img",{staticStyle:{width:"175px",height:"auto"},attrs:{src:e.card_faces[1].image_uris.normal}})])])],2),o("button",{staticClass:"button is-small is-rounded",on:{click:function(o){t.removeCard(e)}}},[t._v("-")])],1)}),t._l(t.filterByMultiGroup(e).cards?t.multiGroupSize()-t.filterByMultiGroup(e).cards.length:0,function(r){return o("li",{key:["other",e.join("-"),r].join(".")},[o("span",{staticClass:"is-size-7"},[t._v("Open Slot ")]),o("button",{staticClass:"button is-small is-rounded",on:{click:function(o){t.$emit("open-modal",t.filterByMultiGroup(e))}}},[t._v("+")])])})],2)])})],2)],2)])])])],1)},c=[],l=o("2909"),u=(o("7f7f"),o("456d"),o("55dd"),o("ac6a"),o("4d48")),d=o("e37d"),f={name:"MetaCube",components:{VPopover:d["a"],VueTabs:u["VueTabs"],VTab:u["VTab"]},props:{change:Object},data:function(){return{meta:null,cubeSize:360,multicolorSize:0}},methods:{cardUrl:function(t){if(t.image_uris)return t.image_uris.normal},getMeta:function(){var t=this;this.$http.get("data.json").then(function(e){t.meta=e.body,t.normalizeMeta(),t.computeFlexSlots()})},normalizeMeta:function(){var t=this;if(this.meta){this.getTypes("Colorless").forEach(function(e){t.meta.mono["Colorless"].filter(function(t){return t.type===e}).forEach(function(e){e.cardSlots=Math.floor(t.colorlessSize()*e.mean)})});var e=this.getColoredGroups();e.forEach(function(e){t.getTypes(e).forEach(function(o){t.meta.mono[e].filter(function(t){return t.type===o}).forEach(function(e){e.cardSlots=Math.floor(t.groupSize()*e.mean)})})});var o=this.getMultiGroups();o.forEach(function(e){t.filterByMultiGroup(e).blocks.forEach(function(e){e.cardSlots=Math.floor(t.multiGroupSize()*e.mean)})})}},computeFlexSlots:function(){var t=this;if(this.meta){var e=this.getColoredGroups();e.forEach(function(e){var o=t.groupSize()-t.countByGroup(e),r=t.meta.mono[e].slice();o>0&&r.sort(function(t,e){return e.stdev-t.stdev}).slice(0,o).forEach(function(t){t.cardSlots+=1});var n=t.countByGroup(e)-t.groupSize();n>0&&r.sort(function(t,e){return e.stdev-t.stdev}).slice(0,n).forEach(function(t){t.cardSlots-=1})})}},getGroups:function(){return this.meta?Object.keys(this.meta.mono):[]},getColoredGroups:function(){return this.meta?Object.keys(this.meta.mono).filter(function(t){return"Colorless"!==t}):[]},getMultiGroups:function(){return this.meta?this.meta.multicolor.map(function(t){return t.colors}):[]},getTypes:function(t){if(t&&this.meta){var e=this.meta.mono[t];if(e)return e.reduce(function(t,e){var o=e.type;return-1===t.indexOf(o)&&t.push(o),t},[])}},filterByType:function(t,e){return this.meta.mono[t].filter(function(t){return t.type===e})},filterByMultiGroup:function(t){return this.meta.multicolor.filter(function(e){return JSON.stringify(e.colors)===JSON.stringify(t)})[0]},countByType:function(t,e){return this.filterByType(t,e).reduce(function(t,e){return t+=e.cardSlots,t},0)},countByGroup:function(t){return this.meta.mono[t].reduce(function(t,e){return t+=e.cardSlots,t},0)},countByMultiGroup:function(t){return this.filterByMultiGroup(t).blocks.reduce(function(t,e){return t+=e.cardSlots,t},0)},openSlots:function(t){return t.cardSlots-t.cards.length},colorlessSize:function(){return.227*Math.floor(this.cubeSize-this.multicolorSize)},groupSize:function(){var t=this.getColoredGroups(),e=this.cubeSize%t.length;return Math.floor((this.cubeSize-this.countByGroup("Colorless")-e-this.multicolorSize)/t.length)},extraSlots:function(){var t=this,e=this.getGroups(),o=e.map(function(e){return t.countByGroup(e)}).reduce(function(t,e){return t+e},0);return this.cubeSize-o-this.multicolorSize},multiGroupSize:function(){var t=this.getMultiGroups();if(0===this.multicolorSize)return 0;var e=this.multicolorSize%t.length;return(this.multicolorSize-e)/t.length},removeCard:function(t){var e=this.meta.mono["Colorless"].filter(function(e){return e.id===t.category});0===e.length&&t.colors&&1===t.colors.length&&(e=this.meta.mono[this.translateColor(t.colors[0])].filter(function(e){return e.id===t.category})),0===e.length&&(e=this.meta.multicolor.filter(function(e){return e.id===t.category})),e[0].cards.splice(e[0].cards.indexOf(t),1)},addSlot:function(t){t.cardSlots+=1},removeSlot:function(t){t.cardSlots-=1},translateColor:function(t){var e={W:"White",U:"Blue",B:"Black",R:"Red",G:"Green"};return e[t]},copyToClipboard:function(){var t=this,e=[];if(!this.meta)return e;var o=this.getGroups();o.forEach(function(o){t.getTypes(o).forEach(function(r){t.meta.mono[o].filter(function(t){return t.type===r}).forEach(function(t){var o=t.cards.map(function(t){return t.name});e=Object(l["a"])(e).concat(Object(l["a"])(o))})})}),this.meta.multicolor.forEach(function(t){var o=t.cards.map(function(t){return t.name});e=Object(l["a"])(e).concat(Object(l["a"])(o))});var r=e.join("\r");this.$copyText(r).then(function(t){this.$toasted.show("Copied list to the clipboard")}.bind(this),function(t){this.$toasted.show("Something went wrong!")}.bind(this))}},computed:{},beforeMount:function(){this.getMeta()},watch:{cubeSize:function(){this.normalizeMeta(),this.computeFlexSlots()},multicolorSize:function(){this.normalizeMeta(),this.computeFlexSlots()},change:{immediate:!0,handler:function(t){if(t&&this.meta){t.colors||(t.colors=t.card_faces[0].colors);var e=this.meta.mono["Colorless"].filter(function(e){return e.id===t.category});0===e.length&&t.colors&&1===t.colors.length&&(e=this.meta.mono[this.translateColor(t.colors[0])].filter(function(e){return e.id===t.category})),0===e.length&&(e=this.meta.multicolor.filter(function(e){return e.id===t.category})),e[0]&&e[0].cards.push(t)}}}}},m=f,p=(o("e9ce"),o("2877")),h=Object(p["a"])(m,s,c,!1,null,"3acdc3da",null),v=h.exports,y=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"modal"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container"},[o("div",{staticClass:"modal-header"},[t._t("header")],2),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"field"},[o("div",{staticClass:"control"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"input is-primary",attrs:{type:"text",placeholder:"Search for text!"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),0===t.cards.length?o("div",{staticClass:"lds-css"},[o("div",{staticClass:"lds-ball",staticStyle:{width:"100%",height:"100%",margin:"0 auto"}},[o("div")])]):t._e(),t._t("body",[t.cards.length>0?o("carousel",{attrs:{perPageCustom:[[768,3],[1024,4]]}},t._l(t.filterBySearch(),function(e,r){return o("slide",{key:[e.id,r].join("."),staticClass:"p-l-10 p-r-10"},[o("span",{staticClass:"is-size-7"},[t._v(t._s(e.name))]),e.image_uris?o("img",{class:{"is-focused":t.selected.id===e.id},attrs:{src:e.image_uris.normal},on:{click:function(o){t.selectCard(e)}}}):t._e(),e.image_uris?t._e():o("div",[o("vue-flip",{attrs:{width:"100%",height:"300px","active-hover":""}},[o("div",{attrs:{slot:"front"},slot:"front"},[o("img",{class:{"is-focused":t.selected.id===e.id},attrs:{src:e.card_faces[0].image_uris.normal},on:{click:function(o){t.selectCard(e)}}})]),o("div",{attrs:{slot:"back"},slot:"back"},[o("img",{class:{"is-focused":t.selected.id===e.id},attrs:{src:e.card_faces[1].image_uris.normal},on:{click:function(o){t.selectCard(e)}}})])])],1)])}),1):t._e()])],2),o("div",{staticClass:"modal-footer"},[t._t("footer",[o("button",{staticClass:"modal-default-button",on:{click:function(e){t.$emit("close-modal",t.selected)}}},[t._v("\n              OK\n            ")])])],2)])])])])},g=[],b=(o("96cf"),o("1da1")),_=(o("4917"),o("386d"),o("3b2b"),o("0a63")),C=o("12dc"),S=o.n(C),M=(o("4bf4"),{components:{Carousel:_["Carousel"],Slide:_["Slide"],VueFlip:S.a},props:{query:Object},data:function(){return{search:"",cards:[],selected:{}}},computed:{},methods:{filterBySearch:function(){var t=new RegExp(this.search.toLowerCase(),"g");return this.cards.filter(function(e){var o;o=e.card_faces?e.card_faces.map(function(t){return t.oracle_text}).join(" "):e.oracle_text;var r=[e.name,o,e.type_line].join(" ").toLowerCase().match(t);return!!r&&r.length>0})},selectCard:function(t){t.id===this.selected.id?this.selected={}:(this.selected=t,this.selected.category=this.query.id)},scryFallQueryString:function(t){var e={White:"W",Blue:"U",Black:"B",Red:"R",Green:"G"},o=[];if(t.types&&(o=t.types.reduce(function(t,e){return t.push("type=".concat(e)),t},[])),t.types&&1===t.types.length&&"Land"===t.types[0])return o.join(" ");if(0===t.colors.length||t.types&&t.types.some(function(t){return"Artifact"===t}))return Object(l["a"])(o).concat(["cmc=".concat(t.cmc),""]).join(" ");if(1===t.colors.length)return Object(l["a"])(o).concat([t.cmc?"cmc=".concat(t.cmc):"","(id=".concat(e[t.colors[0]]," OR color=").concat(e[t.colors[0]],")")]).join(" ");var r=t.colors.map(function(t){return e[t]}).join("");return Object(l["a"])(o).concat([t.cmc?"cmc=".concat(t.cmc):"","(id=".concat(r," OR color=").concat(r,")")]).join(" ")},queryCards:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(e){var o,r,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=n.length>1&&void 0!==n[1]?n[1]:1,t.next=3,this.$http.get("https://api.scryfall.com/cards/search?order=name&page=".concat(o,"&q=").concat(encodeURIComponent(this.scryFallQueryString(e))));case 3:r=t.sent,this.cards=Object(l["a"])(this.cards).concat(Object(l["a"])(r.body.data.map(function(t){return{id:t.id,colors:t.colors,name:t.name,cmc:t.cmc,image_uris:t.image_uris?t.image_uris:null,type_line:t.type_line,oracle_text:t.oracle_text,card_faces:t.card_faces?t.card_faces:null}}).sort(function(t,e){return(""+t.name).localeCompare(e.name)}))),r.body.has_more&&setTimeout(this.queryCards(this.queryBody(this.query),o+1),100);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),queryBody:function(t){var e=[];t.colors?e=t.colors:t.color&&(e="Colorless"!==t.color?[t.color]:[]);var o=null;return"Colorless"===t.color&&"Creature"===t.type?o=["Artifact","Creature"]:t.type&&(o=[t.type]),{cmc:t.cmc,colors:e,types:o}},cardUrl:function(t){if(t.image_uris)return t.image_uris.normal}},beforeMount:function(){},watch:{selected:function(){},query:{immediate:!0,handler:function(t){this.cards=[],this.queryCards(this.queryBody(t))}}}}),j=M,z=(o("96d0"),Object(p["a"])(j,y,g,!1,null,"6738777e",null)),x=z.exports,w={name:"app",data:function(){return{showModal:!1,query:{},change:{}}},methods:{onOpenModal:function(t){this.showModal=!0,this.query=t},onCloseModal:function(t){this.showModal=!1,this.change=t}},components:{MetaCube:v,Modal:x}},O=w,k=(o("034f"),Object(p["a"])(O,i,a,!1,null,null,null)),G=k.exports,B=o("4eb5"),T=o.n(B),E=o("a65d"),q=o.n(E);r["a"].use(q.a,{duration:2500}),r["a"].use(T.a),r["a"].use(n["a"]),r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(G)}}).$mount("#app")},"64a9":function(t,e,o){},8122:function(t,e,o){},"96d0":function(t,e,o){"use strict";var r=o("8122"),n=o.n(r);n.a},c91c:function(t,e,o){},e9ce:function(t,e,o){"use strict";var r=o("c91c"),n=o.n(r);n.a}});
//# sourceMappingURL=app.b415022d.js.map